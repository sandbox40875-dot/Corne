# =====================================================
# ZMK – Corne (Wireless Split)
# STABLE Bluetooth + Low Latency
# Sleep after 1 hour of inactivity
# NO OLED / NO LED / NO RGB
# MULTI-HOST SAFE
# =====================================================

# -----------------------------------------------------
# Bluetooth – STABLE LOW LATENCY (SPLIT SAFE)
# -----------------------------------------------------

CONFIG_BT=y
CONFIG_BT_PERIPHERAL=y

# Advanced BLE scheduler (keep enabled)
CONFIG_BT_CTLR_SCHED_ADVANCED=y

# Connection interval
# 8 = 10 ms, 16 = 20 ms
# (More stable than ultra-aggressive values on laptops)
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=8
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=16

# IMPORTANT:
# Allow skipping a few connection events to prevent BLE starvation
# This FIXES "connected but keyboard not typing"
CONFIG_BT_PERIPHERAL_PREF_SLAVE_LATENCY=2

# Supervision timeout (units of 10 ms)
# Slightly higher to allow controller recovery
CONFIG_BT_PERIPHERAL_PREF_TIMEOUT=600

# Improve RF reliability
CONFIG_BT_CTLR_TX_PWR_PLUS_8=y

# -----------------------------------------------------
# ZMK Sleep – AFTER 1 HOUR (NO WAKE LAG DURING USE)
# -----------------------------------------------------

CONFIG_ZMK_SLEEP=y

# 1 hour = 60 * 60 * 1000 ms
CONFIG_ZMK_IDLE_SLEEP_TIMEOUT=3600000

# -----------------------------------------------------
# Matrix Scan – RESPONSIVE BUT STABLE
# -----------------------------------------------------

CONFIG_ZMK_KSCAN_DEBOUNCE_PRESS_MS=5
CONFIG_ZMK_KSCAN_DEBOUNCE_RELEASE_MS=5

# -----------------------------------------------------
# Split Keyboard – BLE
# -----------------------------------------------------

CONFIG_ZMK_SPLIT=y
CONFIG_ZMK_SPLIT_BLE=y

# Queue sizes to avoid dropped positions
CONFIG_ZMK_SPLIT_BLE_CENTRAL_POSITION_QUEUE_SIZE=16
CONFIG_ZMK_SPLIT_BLE_PERIPHERAL_POSITION_QUEUE_SIZE=16

# -----------------------------------------------------
# REMOVE UNUSED HARDWARE
# -----------------------------------------------------

# No display
CONFIG_ZMK_DISPLAY=n

# No LEDs / RGB
CONFIG_ZMK_RGB_UNDERGLOW=n
CONFIG_ZMK_BACKLIGHT=n

# No external buses
CONFIG_I2C=n
CONFIG_SPI=n

# -----------------------------------------------------
# Keyboard Bluetooth Name (ONLY NAME CHANGE)
# -----------------------------------------------------

CONFIG_BT_DEVICE_NAME="MK42Keyboard"

# -----------------------------------------------------
# DO NOT ENABLE (CAUSES LATENCY / BLE ISSUES)
# -----------------------------------------------------
# CONFIG_PM
# CONFIG_PM_DEVICE
# CONFIG_ZMK_PM
